# chapter 13 검색어 자동완성 시스템

## 트라이 자료구조
- 노드에 문자들을 저장 - 접두어 노드 탐색
- 빈도 정보를 트라이 노드에 저장
- 노드에 인기 검색어를 캐시 저장해두면 전체 트라이를 검색하는 일 방지 가능
  - 검색 결과가 이미 캐시되어있기 때문에 시간복잡도는 O(1)

## 데이터 수집 서비스
- 사용자가 타이핑을 할때마다 실시간으로 트라이를 갱신하는 것은 비효율적이다.
- 트라이는 만들어지고 나면 자주 갱신할 필요가 없어질 것이다

- 따라서, 데이터 분석 서비스 or 로깅서비스로 부터 온 데이터로 트라이 만드는데 씀
- 데이터 분석 서비스 로그 -> 로그 취합 서버 -> 취합된 데이터 -> 작업 서버 -> 트라이 데이터 베이스 -> 트라이 캐시

### 최적화 방안
데이터가 트라이 캐시에 없는 경우 데이터를 데이터베이스에서 가져와 캐시에 채운다

그러나 캐시미스는 캐시 메모리 부족, 서버 장애에 의해 발생할 수 있다

- AJAX 요청
  - 자동완성된 검색어 목록을 가져온다 
  - 요청을 보내기 위해 새로고침 할 필요가 없다
- 브라우저 캐싱
  - 자동완성 검색어 제안 결과는 대부분 짧은 시간 내에 바뀌지 않음
  - 브라우저 캐시에 넣어두면 후속 질의 결과는 바로 캐시에서 가져갈 수 있게됨
- 데이터 샘플링
  - 대규모의 시스템인 경우 모든 질의 결과를 로깅하도록 해놓으면 CPU와 저장공간 과소비 하게됨
  - 따라서, 이럴때 N개의 요청중 1개만 로깅
  

# 논의주제
검색 자동완성 시스템에 대한 질문 보다는 이 많은 데이터들을 앞으로 어떻게 저장하고 처리해 나가는가? 에 대한 궁금증이 생겼습니다
데이터베이스 공간 자원은 무한한 것이 아닐텐데, 데이터가 앞으로 더 많아질 수록 어떻게 저장공간을 늘려나가게 되나요? 물리적 데이터 센터를 계속해서 건설하는 것인지?