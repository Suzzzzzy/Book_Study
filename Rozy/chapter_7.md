# chapter 7 분산 시스템을 위한 유일 ID 생성기 설계
- 분산 환경에서는 auto-increment 속성이 설정된 관계형 데이터 베이스의 기본키를 쓰는 것이 통하지 않는다
- 또한 여러 데이터베이스 서버를 쓰는 경우에는 지연 시간을 낮추기 힘들다
- 그럼 유일성이 보장되는 ID를 분산 시스템에서는 어떻게 생성할 수 있는가??

## 다중 마스터 복제
- auto-increment 기능을 활용
- 다음 ID가 1이 증가되는 것이 아니라 데이터의 개수 K만큼 증가
- ex) DB1: 1, 3, 5... / DB2: 2, 4, 6...
- 단점: 규모 늘리기 어렵고 시간 흐름에 맞추어 커지도록 보장 어렵, 삭제도 어렵

## UUID
- 컴뷰터 시스템에 저장되는 정보를 유일하게 식별하기 위한 128 비트
- 중복 UUID가 발생할 확률은 매우 낮음
- 규모 확장도 쉽고 동기화 이슈도 없다
- 그러나, 128비트로 길고 ID를 시간순으로 나열할 수 없다

## 티켓 서버
- auto-increment 기능을 갖춘 한개의 데이터 서버(티켓 서버)를 중앙 집중형으로 사용
- 중소 규모 애플리케이션에 적합
- 그러나, 티켓 서버에 장애 발생하면 모든 시스템이 영향 받음

## 스노플레이크 접근법
- 트위터에서는 ID 생성을 이 기법으로 함
- 생성해야하는 ID의 구조를 여러 절로 분할
- 64비트: 타임스탬프(41비트) + 데이터센터ID(5비트) + 서버ID(5비트) + 일련번호(12비트)

@ 느낀점: 분산 데이터 베이스의 설계가 실무적으로 와닿았다. 당장 제일 중요한 ID 부터 생성 방법을 정해야 하다니..


# 논의주제
단일 데이터베이스에서 분산 데이터베이스로 확장해야하는 경우, ID 생성방법을 고려할 때, 기존 생성 저장된 ID와 중복되지 않도록 하는 조건도 추가되어야 하겠군요..