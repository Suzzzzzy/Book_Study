# 구글 드라이브 설계
- 요구사항 : 파일 업로드/다운로드, 파일 동기화, 알림, 파일 암호화, 파일크기 10GB 제한, DAU 천만명


- 규모 추정
  - 사용자당 10GB 무료 저장소 할당
  - 평균 파일 크기 500KB
  - 읽기 쓰기 비율 1:1
  - 필요 스토리지 : 5천만명 * 10GB = 500PB
  - 업로드 API QPS = 1천만명 사용자 * 2회 업로드 /24시간/3600초 = 약 240
  - 최대 QPS(*2) = 480


- 개략적 설계 : 파일 업로드 API,파일 다운로드 API, 파일 갱신 히스토리 API, 동기화 충돌, 블록 저장소 서버, 클라우드 저장소, 아카이빙 저장소(cold storage), 메타데이터 DB, 메타데이터 캐시, 오프라인 사용자 백업 큐


- 상세 설계
  - 블록 저장소 서버
  - 높은 일관성 요구사항
  - 메타데이터 DB
  - 업로드 절차
  - 다운로드 절차
  - 알림 서비스
  - 저장소 공간 절약
  - 장애 처리


 ## 논의 주제 : 델타 동기화 전략에서 파일을 나눌때 전체 크기 커져서 나누는 구간이 달라지면 결국 부분 블록만 업데이트 못하고 전체 블록을 변경해야 되는 상황이 오지 않나요?
